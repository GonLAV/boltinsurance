# Two-Way Attachment Sync Configuration
# =======================================

# === DATABASE ===
# SQLite database for attachment sync metadata
ATTACHMENT_SYNC_DB_PATH=./data/attachment-sync.db
ATTACHMENT_SYNC_ENABLE=true

# === STORAGE ===
# Where to store downloaded attachments from ADO
ATTACHMENT_STORAGE_PATH=./attachments
ATTACHMENT_MAX_FILE_SIZE=524288000  # 500MB

# === CHUNKED UPLOAD ===
# Chunk size for large file uploads (default: 5MB)
ATTACHMENT_CHUNK_SIZE=5242880
# Maximum retries for chunk upload
ATTACHMENT_UPLOAD_MAX_RETRIES=3
# Backoff for retry (ms)
ATTACHMENT_UPLOAD_RETRY_BACKOFF_MS=1000

# === WEBHOOK ===
# Secret token for validating incoming webhooks from ADO
# IMPORTANT: Generate a strong secret and keep it confidential
ATTACHMENT_WEBHOOK_SECRET=your-strong-webhook-secret-change-this-in-production

# Webhook endpoint URL (how ADO will call your service)
# Example: https://yourdomain.com/api/webhooks/workitem
ATTACHMENT_WEBHOOK_URL=http://localhost:5000/api/webhooks/workitem

# === SYNC BEHAVIOR ===
# Enable automatic sync on webhook (true) or manual only (false)
ATTACHMENT_AUTO_SYNC_ON_WEBHOOK=true

# Poll interval for async sync jobs (ms)
ATTACHMENT_SYNC_POLL_INTERVAL=5000

# Enable deduplication (check SHA-256 before uploading)
ATTACHMENT_ENABLE_DEDUP=true

# === AZURE DEVOPS / TFS ===
# Already configured in main .env:
# AZDO_ORG_URL
# AZDO_PAT
# AZDO_PROJECT

# Override API version for sync operations (if different from main AZDO_API_VERSION)
# Leave empty to use AZDO_API_VERSION
# ATTACHMENT_SYNC_API_VERSION=5.1

# === LOGGING ===
# Log level: 'debug', 'info', 'warn', 'error'
ATTACHMENT_SYNC_LOG_LEVEL=info

# === RATE LIMITING ===
# Max requests per minute for sync API
ATTACHMENT_SYNC_RATE_LIMIT_RPM=60

# Timeout for sync API calls (ms)
ATTACHMENT_SYNC_REQUEST_TIMEOUT=60000
