/* Global baseline matching provided HTML design */
@view-transition { navigation: auto; }

body { box-sizing: border-box; }

* { margin: 0; padding: 0; box-sizing: border-box; }

html, body { height: 100%; width: 100%; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; }

body { background: #f7fafc; color: #2d3748; transition: background 0.3s ease; }
body.dark-mode { background: #1a202c; color: #e2e8f0; }

/* Apple-inspired global tone */
:root {
	--chrome: #f6f7fb;
	--surface: rgba(255, 255, 255, 0.82);
	--stroke: rgba(0, 0, 0, 0.06);
	--shadow-soft: 0 20px 45px rgba(0, 0, 0, 0.12);
	--shadow-strong: 0 30px 70px rgba(0, 0, 0, 0.18);
	--accent: #4c7bf3;
	--accent-strong: #3c6ff0;
	--text-strong: #0f172a;
	--text-soft: #475569;
}

html, body {
	font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Segoe UI', sans-serif;
}

body {
	background: radial-gradient(circle at 20% 20%, #eef2ff 0, transparent 35%),
		radial-gradient(circle at 80% 0%, #e0f2fe 0, transparent 32%),
		var(--chrome);
	--font-size-form: 14px;
	--control-height: 38px;
	--control-radius: 12px;
	--control-padding-x: 12px;
	--control-padding-y: 8px;
	--gap-x: 16px;
	--gap-y: 12px;
}
body.dark-mode {
	background: #0b1220;
	color: #e2e8f0;
	--chrome: #0b1220;
	--surface: rgba(26, 32, 44, 0.78);
	--stroke: rgba(255, 255, 255, 0.10);
	--shadow-soft: 0 20px 45px rgba(0, 0, 0, 0.45);
	--shadow-strong: 0 30px 70px rgba(0, 0, 0, 0.60);
	--text-strong: #e2e8f0;
	--text-soft: #a0aec0;
}
/* Login Screen */
#loginScreen { position: fixed; top: 0; right: 0; bottom: 0; left: 0; display: flex; align-items: center; justify-content: center; min-height: 100vh; width: 100%; padding: 16px; overflow: auto; }

.login-container { background: white; border-radius: 16px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); padding: 64px; max-width: 560px; width: 100%; text-align: center; }
body.dark-mode .login-container { background: #2d3748; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6); }

.login-logo { font-size: 72px; margin-bottom: 16px; }
.login-title { font-size: 32px; font-weight: 700; margin-bottom: 8px; color: #2d3748; }
body.dark-mode .login-title { color: #e2e8f0; }
.login-subtitle { font-size: 14px; color: #718096; margin-bottom: 32px; }
body.dark-mode .login-subtitle { color: #a0aec0; }

/* Larger controls on login only */
#loginScreen .form-input { font-size: 15px; padding: 12px 14px; height: 44px; }
#loginScreen .btn-primary { font-size: 17px; padding: 16px; }
#loginScreen .btn-secondary { font-size: 15px; padding: 12px 16px; }

@media (max-width: 640px) {
	.login-container { padding: 40px 20px; max-width: 100%; }
	.login-title { font-size: 28px; }
	.login-logo { font-size: 64px; }
}

.form-group { margin-bottom: 10px; text-align: left; }
.form-label { display: block; font-size: 12px; font-weight: 600; margin-bottom: 4px; color: #2d3748; }
body.dark-mode .form-label { color: #e2e8f0; }

.form-input { width: 100%; padding: 10px 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 13px; transition: all 0.2s; background: white; color: #2d3748; }
body.dark-mode .form-input { background: #1a202c; border-color: #4a5568; color: #e2e8f0; }
.form-input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2); }

.btn-primary { width: 100%; padding: 14px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; margin-top: 8px; }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3); background: #5568d3; }
.btn-primary:active { transform: translateY(0); }
.btn-primary:disabled { opacity: 0.6; cursor: not-allowed; box-shadow: none; transform: none; }

/* Refined primary button in-page */
.page-card .btn-primary {
	width: auto;
	min-width: 180px;
	padding: 12px 20px;
	border-radius: 12px;
	background: linear-gradient(135deg, #4c7bf3, #6ca4ff);
	box-shadow: 0 12px 30px rgba(76, 123, 243, 0.25);
}
.page-card .btn-primary:hover { background: linear-gradient(135deg, #3c6ff0, #5e97ff); box-shadow: 0 16px 36px rgba(76, 123, 243, 0.32); }
.page-card .btn-primary:active { transform: translateY(1px); box-shadow: 0 8px 18px rgba(76, 123, 243, 0.24); }

.btn-secondary { padding: 12px 14px; background: white; border: 2px solid #667eea; color: #667eea; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; gap: 8px; }
body.dark-mode .btn-secondary { background: #1a202c; border-color: #667eea; color: #667eea; }
.btn-secondary:hover { background: #667eea; color: white; transform: translateY(-2px); }
.btn-secondary:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

/* App Layout */
#appLayout { display: none; height: 100%; width: 100%; background: #f7fafc; flex-direction: row; }
body.dark-mode #appLayout { background: #1a202c; }
#appLayout.active { display: flex; }

/* Sidebar */
.sidebar { width: 280px; height: 100%; background: white; border-right: 2px solid #e2e8f0; display: flex; flex-direction: column; padding: 0; transition: all 0.3s ease; }
.sidebar.collapsed { margin-left: -280px; }
body.dark-mode .sidebar { background: #2d3748; border-right-color: #4a5568; }

.btn-toggle-sidebar { position: fixed; top: 24px; left: 24px; z-index: 1000; padding: 10px 16px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 18px; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3); transition: all 0.2s; }
.btn-toggle-sidebar:hover { background: #5568d3; transform: translateY(-2px); }

.sidebar-header { padding: 24px; border-bottom: 2px solid #e2e8f0; display: flex; flex-direction: column; gap: 16px; }
body.dark-mode .sidebar-header { border-bottom-color: #4a5568; }
.sidebar-logo { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
.sidebar-logo-icon { font-size: 32px; }
.sidebar-logo-text { font-size: 20px; font-weight: 700; color: #2d3748; }
body.dark-mode .sidebar-logo-text { color: #e2e8f0; }
.sidebar-project { display: flex; align-items: center; gap: 8px; padding: 10px 16px; background: #f7fafc; border-radius: 8px; font-size: 14px; color: #4a5568; border: 1px solid #e2e8f0; }
body.dark-mode .sidebar-project { background: #1a202c; color: #cbd5e0; border-color: #4a5568; }

.sidebar-nav { flex: 1; padding: 16px; overflow-y: auto; overflow-x: hidden; display: flex; flex-direction: column; gap: 8px; }
.nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-radius: 8px; cursor: pointer; transition: all 0.2s; font-size: 14px; font-weight: 600; color: #4a5568; white-space: nowrap; text-decoration: none; }
body.dark-mode .nav-item { color: #cbd5e0; }
.nav-item:hover { background: #f7fafc; color: #2d3748; }
body.dark-mode .nav-item:hover { background: #1a202c; color: #e2e8f0; }
.nav-item.active { background: #667eea; color: white; }
.nav-item-icon { font-size: 18px; }

.sidebar-footer { padding: 16px; border-top: 2px solid #e2e8f0; display: flex; flex-direction: column; gap: 12px; }
body.dark-mode .sidebar-footer { border-top-color: #4a5568; }
.settings-row { display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #f7fafc; border-radius: 8px; margin-bottom: 8px; }
body.dark-mode .settings-row { background: #1a202c; }
.settings-label { font-size: 14px; font-weight: 600; color: #4a5568; }
body.dark-mode .settings-label { color: #cbd5e0; }
.toggle-switch { width: 48px; height: 24px; background: #cbd5e0; border-radius: 12px; position: relative; cursor: pointer; transition: background 0.3s; }
.toggle-switch.active { background: #667eea; }
.toggle-switch::after { content: ''; position: absolute; width: 20px; height: 20px; background: white; border-radius: 50%; top: 2px; left: 2px; transition: transform 0.3s; }
.toggle-switch.active::after { transform: translateX(24px); }
.btn-logout { padding: 12px; background: #fc8181; color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; }
.btn-logout:hover { background: #f56565; transform: translateY(-2px); }

/* Main Content */
.main-content { flex: 1; display: flex; flex-direction: column; height: 100%; overflow: hidden; }
.main-header { background: white; border-bottom: 2px solid #e2e8f0; padding: 24px 32px; display: flex; align-items: center; justify-content: space-between; transition: all 0.3s ease; }
.main-header.collapsed { padding: 8px 32px; }
.main-header.collapsed .page-title { font-size: 18px; }
.main-header.collapsed .header-actions { display: none; }
body.dark-mode .main-header { background: #2d3748; border-bottom-color: #4a5568; }
.page-title { font-size: 28px; font-weight: 700; color: #2d3748; }
body.dark-mode .page-title { color: #e2e8f0; }
.header-actions { display: flex; gap: 12px; }
.btn-icon { padding: 10px 16px; background: white; border: 2px solid #e2e8f0; border-radius: 8px; cursor: pointer; transition: all 0.2s; font-size: 18px; }
body.dark-mode .btn-icon { background: #1a202c; border-color: #4a5568; }
.btn-icon:hover { border-color: #667eea; transform: translateY(-2px); }

/* Test Case Composer – Apple-like glassy layout */
.tc-shell {
	display: flex;
	flex-direction: column;
	gap: 20px;
	background: linear-gradient(145deg, rgba(255,255,255,0.9), rgba(246,248,255,0.92));
	border: 1px solid var(--stroke);
	box-shadow: var(--shadow-soft);
}
body.dark-mode .tc-shell {
	background: linear-gradient(145deg, rgba(45, 55, 72, 0.95), rgba(37, 47, 63, 0.97));
	border-color: rgba(255, 255, 255, 0.1);
}
.tc-header {
	display: flex;
	align-items: flex-start;
	justify-content: space-between;
	gap: 24px;
	padding-bottom: 12px;
	border-bottom: 1px solid var(--stroke);
}
.tc-title { margin: 4px 0 6px 0; font-size: 28px; letter-spacing: -0.4px; color: var(--text-strong); }
.tc-actions { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
.tc-grid { display: grid; grid-template-columns: 1fr; gap: 18px; }
.tc-panel { display: flex; flex-direction: column; gap: 14px; }
.tc-field { display: flex; flex-direction: column; gap: 8px; }
.tc-banner {
	border-radius: 12px;
	padding: 10px 12px;
	font-size: 13px;
	border: 1px solid var(--stroke);
	background: #f8fafc;
}
body.dark-mode .tc-banner {
	border-color: rgba(255, 255, 255, 0.12);
	background: rgba(255, 255, 255, 0.06);
	color: #cbd5e0;
}
.tc-banner.success { background: #e8f9ef; border-color: #c6f6d5; color: #166534; }
.tc-banner.info { background: #eef2ff; border-color: #c7d2fe; color: #312e81; }
.link-button {
	background: none;
	border: none;
	color: var(--accent-strong);
	font-weight: 600;
	font-size: 13px;
	cursor: pointer;
	padding: 0;
	text-align: left;
}
.tc-meta-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
	gap: 8px;
}

/* Compact density tokens (opt-in via .tc-density-compact on the page wrapper) */
.tc-density-compact {
	--font-size-form: 14px;
	--control-height: 38px;
	--control-radius: 12px;
	--control-padding-y: 8px;
	--control-padding-x: 12px;
	--gap-x: 16px;
	--gap-y: 12px;
	--option-row-height: 34px;
	--label-gap: 6px;
}

/* 3/2/1 responsive grid for the “More options” field area */
.tc-density-compact .tc-meta-grid {
	grid-template-columns: repeat(3, minmax(0, 1fr));
	gap: 8px 12px;
}

@media (max-width: 1079px) {
	.tc-density-compact .tc-meta-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 767px) {
	.tc-density-compact .tc-meta-grid { grid-template-columns: 1fr; }
}

.tc-density-compact .tc-field { gap: var(--label-gap); }

.tc-density-compact .form-label {
	margin-bottom: 0;
	line-height: 1.25;
}

/* Compact control sizing (inputs + selects); keep textareas flexible */
.tc-density-compact input.form-input,
.tc-density-compact select.form-input {
	height: var(--control-height);
	border-radius: var(--control-radius);
	padding: var(--control-padding-y) var(--control-padding-x);
	font-size: var(--font-size-form);
	line-height: 1.3;
}

.tc-density-compact textarea.form-input {
	border-radius: var(--control-radius);
	padding: var(--control-padding-y) var(--control-padding-x);
	font-size: var(--font-size-form);
	line-height: 1.35;
}

/* Native select: reduce visual height + align chevron without extra borders */
.tc-density-compact select.form-input {
	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none;
	padding-right: calc(var(--control-padding-x) + 22px);
	background-image:
		linear-gradient(45deg, transparent 50%, currentColor 50%),
		linear-gradient(135deg, currentColor 50%, transparent 50%);
	background-position:
		right 14px center,
		right 9px center;
	background-size: 6px 6px, 6px 6px;
	background-repeat: no-repeat;
}
.tc-section {
	margin-top: 8px;
	padding: 14px 16px;
	border: 1px solid var(--stroke);
	border-radius: 14px;
	background: rgba(255,255,255,0.9);
	box-shadow: 0 12px 34px rgba(0,0,0,0.06);
}
body.dark-mode .tc-section {
	background: rgba(26, 32, 44, 0.80);
	box-shadow: 0 18px 55px rgba(0,0,0,0.35);
}
.tc-section-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 12px;
	margin-bottom: 12px;
}
.tc-section-header h4 { margin: 0; font-size: 16px; letter-spacing: -0.2px; }
.tc-section-actions { display: flex; gap: 8px; flex-wrap: wrap; }
.btn-secondary.ghost { background: transparent; border-color: rgba(0,0,0,0.08); color: var(--text-strong); }
body.dark-mode .btn-secondary.ghost { border-color: rgba(255, 255, 255, 0.14); color: var(--text-strong); }
.btn-secondary.danger { border-color: #fecdd3; color: #b91c1c; background: #fff1f2; }
.eyebrow { text-transform: uppercase; letter-spacing: 1px; font-size: 11px; color: var(--text-soft); font-weight: 700; }

#contentArea { flex: 1; overflow-y: auto; padding: 32px; background: #ffffff; }
body.dark-mode #contentArea { background: #1a202c; }
.hidden { display: none !important; }

/* Apple-like card + form styling (work items, test suites) */
.page-card {
	max-width: 1600px;
	width: calc(100% - 60px);
	margin: 0 auto;
	background: var(--surface);
	-webkit-backdrop-filter: blur(14px);
	backdrop-filter: blur(14px);
	border: 1px solid var(--stroke);
	box-shadow: var(--shadow-soft);
	border-radius: 18px;
	padding: 28px 30px;
	transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* Wide version for Test Case Composer */
.tc-wide {
	max-width: 100% !important;
	width: calc(100% - 40px) !important;
	margin: 0 20px !important;
}
.page-card:hover { box-shadow: var(--shadow-strong); transform: translateY(-2px); }

.card-header { display: flex; align-items: center; justify-content: space-between; gap: 16px; margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--stroke); }
.card-header h2 { font-size: 24px; font-weight: 700; color: var(--text-strong); letter-spacing: -0.2px; }
.card-header .muted { color: var(--text-soft); margin-top: 4px; }

/* New header with top action buttons */
.page-header-actions {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 24px;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--stroke);
}

.page-header-actions > div:first-child {
  flex: 1;
}

.page-header-actions h2 {
  font-size: 24px;
  font-weight: 700;
  color: var(--text-strong);
  letter-spacing: -0.2px;
  margin-bottom: 6px;
}

.page-header-actions p {
  color: var(--text-soft);
  font-size: 14px;
}

.header-actions-right {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-shrink: 0;
}
.pill {
	background: rgba(76, 123, 243, 0.12);
	color: var(--accent-strong);
	padding: 8px 14px;
	border-radius: 999px;
	font-weight: 700;
	font-size: 12px;
	letter-spacing: 0.4px;
	border: 1px solid rgba(76, 123, 243, 0.25);
}

.form-grid {
	display: grid;
	grid-template-columns: 1fr;
	gap: 20px;
}

.form-grid.two-col {
	grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
	align-items: start;
	gap: 28px;
}

.stack { display: flex; flex-direction: column; gap: 16px; }

label { display: flex; flex-direction: column; gap: 8px; font-weight: 600; color: var(--text-strong); letter-spacing: -0.1px; }
label input,
label textarea,
label select {
	border: 1px solid rgba(0, 0, 0, 0.08);
	border-radius: 12px;
	padding: 12px 14px;
	font-size: 14px;
	font-weight: 500;
	background: #fdfdff;
	color: #0f172a;
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.9);
	transition: border-color 0.18s ease, box-shadow 0.18s ease, transform 0.12s ease;
}
body.dark-mode label input,
body.dark-mode label textarea,
body.dark-mode label select {
	border-color: rgba(255, 255, 255, 0.15);
	background: #2d3748;
	color: #e2e8f0;
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}
label textarea { resize: vertical; min-height: 120px; }
label select { cursor: pointer; }
label input:focus,
label textarea:focus,
label select:focus {
	outline: none;
	border-color: rgba(76, 123, 243, 0.9);
	box-shadow: 0 0 0 4px rgba(76, 123, 243, 0.15);
	transform: translateY(-1px);
}
body.dark-mode label input:focus,
body.dark-mode label textarea:focus,
body.dark-mode label select:focus {
	border-color: rgba(76, 123, 243, 0.7);
	box-shadow: 0 0 0 4px rgba(76, 123, 243, 0.25);
}
.muted { color: var(--text-soft); font-weight: 500; }

.form-actions { justify-content: flex-start; margin-top: 12px; }

/* Tabs for Create Work Item */
.tab-strip {
	display: inline-flex;
	gap: 8px;
	padding: 6px;
	background: rgba(255, 255, 255, 0.78);
	border: 1px solid var(--stroke);
	border-radius: 14px;
	-webkit-backdrop-filter: blur(8px);
	backdrop-filter: blur(8px);
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
}
.tab-chip {
	padding: 10px 14px;
	border-radius: 10px;
	border: 1px solid transparent;
	font-weight: 700;
	color: var(--text-soft);
	background: transparent;
	cursor: pointer;
	transition: all 0.18s ease;
}
.tab-chip:hover { color: var(--text-strong); background: rgba(76, 123, 243, 0.06); }
.tab-chip.active {
	color: var(--text-strong);
	background: linear-gradient(135deg, rgba(76, 123, 243, 0.14), rgba(108, 164, 255, 0.14));
	border-color: rgba(76, 123, 243, 0.28);
	box-shadow: 0 6px 16px rgba(76, 123, 243, 0.16);
}

.alert {
	margin-top: 18px;
	padding: 14px 16px;
	border-radius: 12px;
	border: 1px solid var(--stroke);
	background: rgba(255, 255, 255, 0.86);
	-webkit-backdrop-filter: blur(10px);
	backdrop-filter: blur(10px);
	font-weight: 600;
}
.alert-success { color: #0f5132; border-color: #bcd9c9; background: #ecfdf3; }
.alert-error { color: #842029; border-color: #f5c2c7; background: #fff0f1; }

/* Section blocks (Bug-like layout) */
.section-block {
	background: rgba(255, 255, 255, 0.9);
	border: 1px solid var(--stroke);
	border-radius: 14px;
	padding: 16px;
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.7);
}
.section-title {
	font-size: 14px;
	font-weight: 800;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-strong);
	margin-bottom: 8px;
}
.section-grid {
	display: grid;
	grid-template-columns: 1.2fr 0.8fr;
	gap: 16px;
}
.section-stack { display: flex; flex-direction: column; gap: 14px; }

/* Dashboard */
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 24px; margin-bottom: 32px; }
.stat-card { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); transition: transform 0.2s, box-shadow 0.2s; }
body.dark-mode .stat-card { background: #2d3748; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3); }
.stat-card:hover { transform: translateY(-4px); box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15); }
.stat-icon { font-size: 32px; margin-bottom: 12px; }
.stat-label { font-size: 14px; color: #718096; margin-bottom: 8px; }
body.dark-mode .stat-label { color: #a0aec0; }
.stat-value { font-size: 32px; font-weight: 700; color: #2d3748; }
body.dark-mode .stat-value { color: #e2e8f0; }

.recent-section { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); }
body.dark-mode .recent-section { background: #2d3748; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3); }
.section-title { font-size: 18px; font-weight: 700; margin-bottom: 16px; color: #2d3748; }
body.dark-mode .section-title { color: #e2e8f0; }
.recent-list { list-style: none; }
.recent-item { display: flex; align-items: center; justify-content: space-between; padding: 12px; border-radius: 8px; transition: background 0.2s; margin-bottom: 8px; }
.recent-item:hover { background: #f7fafc; }
body.dark-mode .recent-item:hover { background: #1a202c; }
.recent-item-title { font-weight: 600; color: #2d3748; }
body.dark-mode .recent-item-title { color: #e2e8f0; }
.recent-item-meta { font-size: 12px; color: #718096; }
body.dark-mode .recent-item-meta { color: #a0aec0; }

/* User Stories */
.filter-bar { display: flex; gap: 12px; margin-bottom: 24px; flex-wrap: wrap; align-items: center; }
.filter-btn { padding: 10px 20px; background: white; border: 2px solid #e2e8f0; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; color: #4a5568; transition: all 0.2s; display: flex; align-items: center; gap: 8px; }
body.dark-mode .filter-btn { background: #2d3748; border-color: #4a5568; color: #cbd5e0; }
.filter-btn:hover, .filter-btn.active { background: #667eea; color: white; border-color: #667eea; }
.search-box { flex: 1; min-width: 240px; padding: 10px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px; background: white; color: #2d3748; }
body.dark-mode .search-box { background: #2d3748; border-color: #4a5568; color: #e2e8f0; }
.search-box:focus { outline: none; border-color: #667eea; }

.user-stories-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; margin-bottom: 32px; }
.story-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); transition: all 0.2s; border-left: 4px solid #667eea; }
body.dark-mode .story-card { background: #2d3748; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3); }
.story-card.no-tests { border-left-color: #fc8181; }
.story-card.has-tests { border-left-color: #48bb78; }
.story-card:hover { transform: translateY(-4px); box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15); }
.story-header { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 12px; }
.story-id { font-size: 12px; font-weight: 700; color: #667eea; background: rgba(102, 126, 234, 0.1); padding: 4px 8px; border-radius: 4px; }
.story-status { font-size: 11px; padding: 4px 8px; border-radius: 4px; font-weight: 600; }
.story-status.active { background: #c6f6d5; color: #22543d; }
.story-status.inprogress { background: #fef3c7; color: #78350f; }
body.dark-mode .story-status.active { background: #22543d; color: #c6f6d5; }
body.dark-mode .story-status.inprogress { background: #78350f; color: #fef3c7; }
.story-title { font-size: 16px; font-weight: 700; color: #2d3748; margin-bottom: 8px; line-height: 1.4; }
body.dark-mode .story-title { color: #e2e8f0; }
.story-meta { display: flex; gap: 12px; font-size: 12px; color: #718096; margin-bottom: 16px; flex-wrap: wrap; }
body.dark-mode .story-meta { color: #a0aec0; }
.story-badge { display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; background: #f7fafc; border-radius: 4px; font-weight: 600; }
body.dark-mode .story-badge { background: #1a202c; }
.story-actions { display: flex; gap: 8px; }
.btn-story-action { flex: 1; padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 6px; background: white; color: #4a5568; }
body.dark-mode .btn-story-action { background: #1a202c; border-color: #4a5568; color: #cbd5e0; }
.btn-story-action:hover { border-color: #667eea; color: #667eea; transform: translateY(-2px); }
.btn-story-action.primary { background: #667eea; color: white; border-color: #667eea; }
.btn-story-action.primary:hover { background: #5568d3; }

/* Test Plans (Apple-inspired) */
.tp-shell {
	max-width: 1260px;
	margin: 18px auto 40px auto;
	padding: 0 12px 32px 12px;
}

.tp-hero {
	display: grid;
	grid-template-columns: 1.1fr 0.9fr;
	gap: 22px;
	padding: 28px;
	border-radius: 24px;
	background: linear-gradient(135deg, rgba(255,255,255,0.94), rgba(245,247,255,0.92));
	border: 1px solid var(--stroke);
	box-shadow: var(--shadow-soft);
	-webkit-backdrop-filter: blur(14px);
	backdrop-filter: blur(14px);
}

.tp-hero-copy .tp-title {
	font-size: 34px;
	letter-spacing: -0.6px;
	margin: 6px 0 10px 0;
}

.tp-metrics { display: flex; gap: 16px; flex-wrap: wrap; margin-top: 10px; }
.tp-metric { padding: 12px 14px; border-radius: 14px; background: rgba(255,255,255,0.72); border: 1px solid var(--stroke); box-shadow: inset 0 1px 0 rgba(255,255,255,0.7); min-width: 120px; }
.tp-metric-label { display: block; font-size: 11px; letter-spacing: 0.4px; text-transform: uppercase; color: var(--text-soft); font-weight: 700; margin-bottom: 4px; }
.tp-metric-value { font-size: 18px; font-weight: 800; color: var(--text-strong); }

.tp-hero-form { display: grid; grid-template-columns: 1fr; gap: 10px; align-content: start; background: rgba(255,255,255,0.8); padding: 16px; border-radius: 16px; border: 1px solid var(--stroke); box-shadow: inset 0 1px 0 rgba(255,255,255,0.7); }
.tp-field { display: flex; flex-direction: column; gap: 6px; }
.tp-label { font-weight: 700; font-size: 12px; letter-spacing: 0.2px; color: var(--text-soft); text-transform: uppercase; }
.tp-hero-form input { border-radius: 12px; padding: 12px 14px; border: 1px solid rgba(0,0,0,0.08); background: #fff; font-size: 14px; }
.tp-hero-form input:focus { outline: none; border-color: rgba(76,123,243,0.9); box-shadow: 0 0 0 4px rgba(76,123,243,0.15); }
.tp-hero-form .btn-primary { width: 100%; }

.tp-alert { margin: 18px auto 0 auto; max-width: 1260px; }

.tp-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 18px; margin-top: 22px; }
.tp-panel { background: var(--surface); border: 1px solid var(--stroke); border-radius: 16px; padding: 18px; box-shadow: var(--shadow-soft); -webkit-backdrop-filter: blur(12px); backdrop-filter: blur(12px); min-height: 320px; display: flex; flex-direction: column; gap: 12px; }
.tp-panel-header { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 6px; border-bottom: 1px solid var(--stroke); padding-bottom: 10px; }
.tp-panel-header h3 { margin: 2px 0 4px 0; letter-spacing: -0.2px; }

.tp-plan-list { display: grid; grid-template-columns: 1fr; gap: 10px; }
.tp-plan-card { text-align: left; padding: 14px; border-radius: 14px; border: 1px solid var(--stroke); background: rgba(255,255,255,0.86); cursor: pointer; transition: all 0.18s ease; display: flex; flex-direction: column; gap: 6px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.8); }
.tp-plan-card:hover { transform: translateY(-2px); box-shadow: 0 12px 22px rgba(0,0,0,0.08); }
.tp-plan-card.active { border-color: rgba(76,123,243,0.4); box-shadow: 0 16px 30px rgba(76,123,243,0.18); background: linear-gradient(135deg, rgba(76,123,243,0.12), rgba(108,164,255,0.12)); }
.tp-plan-top { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
.tp-plan-name { font-size: 16px; font-weight: 800; letter-spacing: -0.2px; color: var(--text-strong); }
.tp-plan-id { font-size: 12px; color: var(--text-soft); font-weight: 700; }
.tp-plan-meta { font-size: 13px; color: var(--text-soft); }
.tp-pill { padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(0,0,0,0.08); background: rgba(0,0,0,0.04); font-weight: 700; font-size: 11px; text-transform: uppercase; letter-spacing: 0.6px; color: var(--text-soft); }

.tp-tree-panel { display: flex; flex-direction: column; gap: 6px; max-height: 480px; overflow-y: auto; padding-right: 6px; }
.tp-tree-row { display: block; }
.tp-tree-chip { width: 100%; text-align: left; padding: 10px 12px; border-radius: 12px; border: 1px solid transparent; background: transparent; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: all 0.15s ease; }
.tp-tree-chip:hover { background: rgba(0,0,0,0.04); }
.tp-tree-chip.active { border-color: rgba(76,123,243,0.45); background: rgba(76,123,243,0.08); box-shadow: 0 10px 22px rgba(76,123,243,0.15); }
.tp-tree-icon { font-size: 16px; }
.tp-tree-label { font-weight: 700; color: var(--text-strong); flex: 1; }
.tp-tree-count { padding: 4px 8px; border-radius: 10px; background: rgba(0,0,0,0.06); font-size: 12px; font-weight: 800; color: var(--text-soft); }

.tp-detail-grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
.tp-detail-card { border: 1px solid var(--stroke); border-radius: 14px; padding: 14px; background: rgba(255,255,255,0.9); box-shadow: inset 0 1px 0 rgba(255,255,255,0.7); display: flex; flex-direction: column; gap: 10px; }
.tp-detail-row { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
.tp-detail-label { font-size: 13px; color: var(--text-soft); font-weight: 700; }
.tp-detail-value { font-size: 14px; font-weight: 800; color: var(--text-strong); }
.tp-actions { display: flex; gap: 10px; flex-wrap: wrap; }
.tp-actions .btn-primary { min-width: 180px; text-align: center; }
.tp-actions .btn-secondary { min-width: 140px; }

@media (max-width: 1100px) {
	.tp-hero { grid-template-columns: 1fr; }
	.tp-grid { grid-template-columns: 1fr; }
}

/* Team Tests */
.tests-filters { display: flex; gap: 12px; flex-wrap: wrap; align-items: center; margin-bottom: 20px; }
.tests-list { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
body.dark-mode .tests-list { background: #2d3748; box-shadow: 0 2px 8px rgba(0,0,0,0.3); }

/* Create Test Case */
.form-card { background: white; border-radius: 10px; padding: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); margin-bottom: 20px; }
body.dark-mode .form-card { background: #2d3748; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3); }
.card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid #e2e8f0; }
body.dark-mode .card-header { border-bottom-color: #4a5568; }
.card-title { font-size: 16px; font-weight: 700; color: #2d3748; }
body.dark-mode .card-title { color: #e2e8f0; }

.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px; }
.form-group-full { grid-column: 1 / -1; }
.compact-fields-row { display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px; margin-top: 12px; }
.form-group-compact { display: flex; flex-direction: column; gap: 6px; }
.form-label-compact { font-size: 11px; font-weight: 600; color: #718096; text-transform: uppercase; letter-spacing: 0.5px; }
body.dark-mode .form-label-compact { color: #a0aec0; }
.form-input-compact { width: 100%; padding: 8px 10px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 13px; background: white; color: #2d3748; transition: all 0.2s; }
body.dark-mode .form-input-compact { background: #1a202c; border-color: #4a5568; color: #e2e8f0; }
.form-input-compact:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1); }

/* Steps Editor */
.steps-mode-tabs { display: flex; gap: 8px; margin-bottom: 20px; }
.steps-mode-tab { padding: 10px 20px; background: #e2e8f0; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; color: #4a5568; transition: all 0.2s; }
body.dark-mode .steps-mode-tab { background: #1a202c; color: #cbd5e0; }
.steps-mode-tab.active { background: #667eea; color: white; }

.steps-grid { display: flex; flex-direction: column; gap: 16px; }
.empty-state { text-align: center; padding: 64px 32px; color: #718096; }
body.dark-mode .empty-state { color: #a0aec0; }
.empty-state-icon { font-size: 64px; margin-bottom: 16px; opacity: 0.5; }
.empty-state-title { font-size: 20px; font-weight: 600; margin-bottom: 8px; }
.empty-state-text { font-size: 14px; }

.templates-launcher { position: relative; display: flex; justify-content: flex-end; margin-bottom: 12px; }
.templates-btn { padding: 12px 16px; background: linear-gradient(135deg, #0ea5e9, #22c55e); color: #fff; border: none; border-radius: 12px; font-size: 14px; font-weight: 700; cursor: pointer; box-shadow: 0 10px 24px rgba(14, 165, 233, 0.35); transition: transform 0.15s ease, box-shadow 0.2s ease; display: inline-flex; align-items: center; gap: 8px; }
.templates-btn:hover { transform: translateY(-2px); box-shadow: 0 14px 28px rgba(14, 165, 233, 0.4); }
.templates-btn:active { transform: translateY(0); box-shadow: 0 8px 18px rgba(14, 165, 233, 0.35); }

/* Context toolbar for rich text */
.ctx-toolbar { position: absolute; display: flex; gap: 8px; background: rgba(10, 15, 31, 0.9); -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); border: 1px solid #1f2937; border-radius: 10px; padding: 8px; box-shadow: 0 8px 24px rgba(0,0,0,0.35); z-index: 4000; }
.ctx-btn { appearance: none; border: 1px solid #334155; background: #0b1226; color: #e2e8f0; padding: 8px 10px; border-radius: 8px; font-size: 13px; cursor: pointer; transition: all 0.15s ease; white-space: nowrap; }
.ctx-btn:hover { border-color: #0ea5e9; color: #fff; transform: translateY(-1px); }
.ctx-btn-primary { border-color: #22c55e; color: #fff; background: linear-gradient(135deg, #0ea5e9, #22c55e); box-shadow: 0 8px 18px rgba(14,165,233,0.35); }
.ctx-btn-primary:hover { transform: translateY(-1px) scale(1.01); }

.ctx-toast { position: fixed; left: 50%; transform: translateX(-50%); bottom: 20px; background: #111827; border: 1px solid #1f2937; color: #e2e8f0; padding: 12px 16px; border-radius: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.25); display: none; max-width: 520px; z-index: 4000; }
.ctx-toast.show { display: block; }

.step-item { background: white; border: 2px solid #e2e8f0; border-radius: 10px; padding: 16px; transition: all 0.2s; position: relative; }
body.dark-mode .step-item { background: #2d3748; border-color: #4a5568; }
.step-item:hover { border-color: #667eea; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1); transform: translateY(-2px); }
.step-item.dragging { opacity: 0.5; transform: scale(0.98); }
.step-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
.step-header-left { display: flex; align-items: center; gap: 12px; }
.drag-handle { font-size: 20px; cursor: move; color: #cbd5e0; }
.step-number { font-weight: 700; color: #667eea; font-size: 18px; }
.step-actions { display: flex; gap: 8px; }
.btn-step-action { padding: 6px 10px; background: transparent; border: 1px solid #e2e8f0; border-radius: 6px; cursor: pointer; font-size: 14px; transition: all 0.2s; }
body.dark-mode .btn-step-action { border-color: #4a5568; }
.btn-step-action:hover { background: #f7fafc; transform: scale(1.05); }
body.dark-mode .btn-step-action:hover { background: #2d3748; }

.step-fields { display: grid; grid-template-columns: 1fr 1fr auto; gap: 16px; align-items: start; }
.step-field-group { display: flex; flex-direction: column; gap: 6px; position: relative; }
.step-field-label { font-size: 11px; font-weight: 600; color: #718096; text-transform: uppercase; letter-spacing: 0.5px; }
body.dark-mode .step-field-label { color: #a0aec0; }
.step-field-wrapper { position: relative; }

.formatting-toolbar { display: none; position: absolute; top: -52px; left: 0; background: white; border: 2px solid #667eea; border-radius: 10px; padding: 8px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25); z-index: 1000; gap: 6px; flex-wrap: wrap; max-width: 600px; align-items: center; }
body.dark-mode .formatting-toolbar { background: #2d3748; border-color: #667eea; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6); }
.formatting-toolbar.active { display: flex; }
.format-btn { padding: 8px 12px; background: white; border: 1px solid #e2e8f0; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.2s; white-space: nowrap; display: flex; align-items: center; gap: 4px; min-width: 38px; justify-content: center; }
body.dark-mode .format-btn { background: #1a202c; border-color: #4a5568; color: #e2e8f0; }
.format-btn:hover { background: #667eea; color: white; border-color: #667eea; transform: translateY(-2px); box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3); }
.format-btn.active { background: #667eea; color: white; border-color: #667eea; }
.toolbar-separator { width: 1px; height: 28px; background: #cbd5e0; margin: 0 4px; }
body.dark-mode .toolbar-separator { background: #4a5568; }

.color-picker-wrapper, .size-picker-wrapper, .emoji-picker-wrapper { position: relative; display: inline-block; }
.color-picker-dropdown, .size-picker-dropdown, .emoji-picker-dropdown { display: none; position: absolute; top: 100%; left: 0; margin-top: 6px; background: white; border: 2px solid #667eea; border-radius: 8px; padding: 10px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2); z-index: 1100; }
body.dark-mode .color-picker-dropdown, body.dark-mode .size-picker-dropdown, body.dark-mode .emoji-picker-dropdown { background: #2d3748; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5); }
.color-picker-dropdown.active, .size-picker-dropdown.active, .emoji-picker-dropdown.active { display: flex; }
.color-picker-dropdown { gap: 8px; flex-wrap: wrap; width: 200px; }
.size-picker-dropdown { flex-direction: column; gap: 4px; min-width: 140px; padding: 8px; }
.emoji-picker-dropdown { gap: 8px; flex-wrap: wrap; width: 320px; max-height: 240px; overflow-y: auto; padding: 14px; }

.color-option { width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s; }
.color-option:hover { transform: scale(1.15); border-color: #667eea; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); }
.size-option { padding: 10px 14px; background: white; border: 1px solid #e2e8f0; border-radius: 5px; cursor: pointer; text-align: left; font-weight: 600; transition: all 0.2s; }
body.dark-mode .size-option { background: #1a202c; border-color: #4a5568; color: #e2e8f0; }
.size-option:hover { background: #667eea; color: white; border-color: #667eea; transform: translateX(4px); }
.emoji-option { font-size: 24px; cursor: pointer; padding: 6px; border-radius: 6px; transition: all 0.2s; line-height: 1; }
.emoji-option:hover { background: #f7fafc; transform: scale(1.15); }
body.dark-mode .emoji-option:hover { background: #1a202c; }

.step-action, .step-expected { width: 100%; padding: 10px 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 13px; font-family: inherit; transition: all 0.2s; background: white; color: #2d3748; min-height: 44px; line-height: 1.5; }
body.dark-mode .step-action, body.dark-mode .step-expected { background: #1a202c; border-color: #4a5568; color: #e2e8f0; }
.step-action:focus, .step-expected:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); min-height: 80px; }

.step-rich { width: 100%; min-height: 44px; padding: 12px 14px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px; line-height: 1.5; background: white; transition: all 0.2s; }
body.dark-mode .step-rich { background: #1a202c; border-color: #4a5568; color: #e2e8f0; }
.step-rich:focus { outline: none; border-color: #29b6f6; box-shadow: 0 0 0 3px rgba(41, 182, 246, 0.1); min-height: 80px; }
.step-rich:empty::before { content: attr(data-placeholder); color: #a0aec0; pointer-events: none; }

.inline-toolbar { position: absolute; background: #111827; color: #fff; border-radius: 8px; padding: 6px 8px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); display: none; gap: 6px; z-index: 1000; }
.inline-toolbar button { background: transparent; border: none; color: #fff; cursor: pointer; font-size: 13px; padding: 4px 6px; border-radius: 6px; }
.inline-toolbar button:hover { background: rgba(255,255,255,0.1); }

@media (max-width: 768px) {
	.step-fields { grid-template-columns: 1fr; }
}

.attachment-preview { background: #f7fafc; border: 2px solid #e2e8f0; border-radius: 8px; padding: 8px; }
body.dark-mode .attachment-preview { background: #1a202c; border-color: #4a5568; }
.preview-thumbnail { width: 100%; height: 80px; object-fit: cover; border-radius: 6px; border: 2px solid #e2e8f0; cursor: pointer; margin-bottom: 6px; display: flex; align-items: center; justify-content: center; background: white; }
body.dark-mode .preview-thumbnail { background: #1a202c; border-color: #4a5568; }
.preview-icon { font-size: 48px; text-align: center; }
.preview-error { text-align: center; padding: 20px; color: #718096; font-size: 12px; }
body.dark-mode .preview-error { color: #a0aec0; }

/* Raw Editor */
.raw-editor-toolbar { display: flex; gap: 12px; margin-bottom: 16px; }
.btn-raw-action { padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 8px; }
.btn-raw-action:hover { background: #5568d3; transform: translateY(-2px); }
.raw-editor { width: 100%; min-height: 400px; padding: 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.6; resize: vertical; background: white; color: #2d3748; }
body.dark-mode .raw-editor { background: #1a202c; border-color: #4a5568; color: #e2e8f0; }
.raw-editor:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }

.raw-editor-actions { display: flex; gap: 8px; margin-top: 8px; }

/* Form Actions */
.form-actions { display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px; }
.btn-cancel { padding: 12px 24px; background: white; border: 2px solid #e2e8f0; color: #4a5568; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
body.dark-mode .btn-cancel { background: #1a202c; border-color: #4a5568; color: #cbd5e0; }
.btn-cancel:hover { background: #f7fafc; transform: translateY(-2px); }
body.dark-mode .btn-cancel:hover { background: #2d3748; }
.btn-submit { padding: 12px 32px; background: #48bb78; color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 8px; }
.btn-submit:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(72, 187, 120, 0.3); background: #38a169; }

/* Toast */
.toast { position: fixed; bottom: -100px; right: 32px; background: white; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); padding: 20px 24px; display: flex; align-items: center; gap: 16px; z-index: 3000; transition: bottom 0.3s ease; min-width: 320px; }
body.dark-mode .toast { background: #2d3748; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5); }
.toast.active { bottom: 32px; }
.toast-icon { font-size: 28px; }
.toast-content { flex: 1; }
.toast-title { font-size: 16px; font-weight: 700; margin-bottom: 4px; color: #2d3748; }
body.dark-mode .toast-title { color: #e2e8f0; }
.toast-message { font-size: 14px; color: #718096; }
body.dark-mode .toast-message { color: #a0aec0; }

/* Small helpers used across pages (avoid inline styles) */
.tp-banner-mb16 { margin-bottom: 16px; }
.muted-hint { margin-top: 8px; font-size: 12px; }

/* Dev-only badge (no inline styles) */
.debug-badge {
	position: fixed;
	bottom: 12px;
	right: 12px;
	padding: 6px 10px;
	background: var(--surface);
	color: var(--text-strong);
	border: 1px solid var(--stroke);
	border-radius: 6px;
	font-size: 12px;
	opacity: 0.95;
	box-shadow: var(--shadow-soft);
	z-index: 9999;
}

/* Scrollbars */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: #f1f1f1; }
body.dark-mode ::-webkit-scrollbar-track { background: #1a202c; }
::-webkit-scrollbar-thumb { background: #cbd5e0; border-radius: 4px; }
body.dark-mode ::-webkit-scrollbar-thumb { background: #4a5568; }
::-webkit-scrollbar-thumb:hover { background: #a0aec0; }

/* Templates Modal - Full Dark Mode Support */
.templates-modal-overlay {
	position: fixed;
	/* Fallback for older browsers that don't fully support `inset` */
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	background: rgba(0, 0, 0, 0.5);
	display: flex;
	align-items: center;
	justify-content: center;
	/* Must be higher than app header/sidebar z-index */
	z-index: 9999;
}

.templates-modal-container {
	background: white;
	border-radius: 16px;
	box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
	width: 92%;
	max-width: 1400px;
	max-height: 90vh;
	display: flex;
	flex-direction: column;
	transition: background 0.3s ease;
	overflow: hidden;
}
body.dark-mode .templates-modal-container {
	background: #2d3748;
	box-shadow: 0 25px 50px rgba(0, 0, 0, 0.6);
}

.templates-modal-header {
	background: linear-gradient(135deg, #0ea5e9, #06b6d4);
	padding: 24px;
	border-bottom: 2px solid rgba(255, 255, 255, 0.2);
	display: flex;
	justify-content: space-between;
	align-items: center;
	gap: 20px;
	flex-wrap: wrap;
	z-index: 10;
	flex-shrink: 0;
}

body.dark-mode .templates-modal-header {
	background: linear-gradient(135deg, #0284c7, #0891b2);
	border-bottom-color: rgba(255, 255, 255, 0.1);
}

.templates-modal-title {
	font-size: 24px;
	font-weight: 700;
	color: white;
	margin-bottom: 4px;
	letter-spacing: -0.5px;
}

.templates-modal-subtitle {
	font-size: 14px;
	color: rgba(255, 255, 255, 0.9);
	font-weight: 500;
}

.templates-modal-controls {
	display: flex;
	align-items: center;
	gap: 12px;
	flex-wrap: nowrap;
}

.templates-modal-actions {
	display: flex;
	align-items: center;
	gap: 10px;
}

.templates-modal-new {
	background: rgba(255, 255, 255, 0.2);
	border: 2px solid rgba(255, 255, 255, 0.3);
	border-radius: 8px;
	padding: 10px 14px;
	cursor: pointer;
	color: white;
	font-weight: 700;
	font-size: 14px;
	white-space: nowrap;
	transition: all 0.2s ease;
}

.templates-modal-new:hover {
	background: rgba(255, 255, 255, 0.28);
	border-color: rgba(255, 255, 255, 0.45);
}

.templates-modal-editor {
	padding: 16px 24px;
	border-bottom: 1px solid rgba(0, 0, 0, 0.06);
	background: rgba(255, 255, 255, 0.7);
}

body.dark-mode .templates-modal-editor {
	background: rgba(26, 32, 44, 0.65);
	border-bottom-color: rgba(255, 255, 255, 0.08);
}

.templates-editor-grid {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 12px;
}

.templates-editor-field {
	display: flex;
	flex-direction: column;
	gap: 6px;
}

.templates-editor-field.full {
	grid-column: 1 / -1;
}

.templates-editor-label {
	font-size: 12px;
	font-weight: 800;
	color: rgba(45, 55, 72, 0.85);
}

body.dark-mode .templates-editor-label {
	color: rgba(226, 232, 240, 0.9);
}

.templates-editor-input,
.templates-editor-select,
.templates-editor-textarea {
	border-radius: 10px;
	border: 1px solid rgba(0, 0, 0, 0.12);
	background: rgba(255, 255, 255, 0.95);
	padding: 10px 12px;
	color: #1f2937;
	font-weight: 600;
}

body.dark-mode .templates-editor-input,
body.dark-mode .templates-editor-select,
body.dark-mode .templates-editor-textarea {
	background: rgba(26, 32, 44, 0.9);
	border-color: rgba(255, 255, 255, 0.12);
	color: #e2e8f0;
}

.templates-editor-textarea {
	min-height: 120px;
	resize: vertical;
	font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
	font-size: 12px;
	line-height: 1.55;
}

.templates-editor-actions {
	display: flex;
	justify-content: flex-end;
	gap: 10px;
	margin-top: 12px;
}

.templates-editor-error {
	margin-top: 8px;
	font-size: 13px;
	font-weight: 700;
	color: rgba(220, 38, 38, 0.95);
}

body.dark-mode .templates-editor-error {
	color: rgba(248, 113, 113, 0.95);
}

.templates-card-actions {
	display: flex;
	gap: 10px;
	margin-top: 14px;
}

.templates-card-edit {
	flex: 0 0 auto;
	padding: 10px 12px;
	border-radius: 10px;
	border: 2px solid rgba(0, 0, 0, 0.08);
	background: rgba(0, 0, 0, 0.02);
	font-weight: 800;
	cursor: pointer;
}

body.dark-mode .templates-card-edit {
	border-color: rgba(255, 255, 255, 0.14);
	background: rgba(255, 255, 255, 0.06);
	color: #e2e8f0;
}

.templates-modal-label {
	color: white;
	font-size: 14px;
	font-weight: 600;
	white-space: nowrap;
}

.templates-modal-select {
	padding: 10px 14px;
	border-radius: 8px;
	background: rgba(255, 255, 255, 0.3);
	color: white;
	border: 2px solid rgba(255, 255, 255, 0.5);
	cursor: pointer;
	font-weight: 600;
	font-size: 14px;
	transition: all 0.2s ease;
	min-width: 160px;
	appearance: none;
	background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white' width='20' height='20'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
	background-repeat: no-repeat;
	background-position: right 8px center;
	padding-right: 32px;
}

.templates-modal-select:hover {
	background-color: rgba(255, 255, 255, 0.4);
	border-color: white;
	background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white' width='20' height='20'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
	background-repeat: no-repeat;
	background-position: right 8px center;
}

.templates-modal-select:focus {
	outline: none;
	background-color: rgba(255, 255, 255, 0.5);
	border-color: white;
	box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
	background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white' width='20' height='20'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
	background-repeat: no-repeat;
	background-position: right 8px center;
}

.templates-modal-select option {
	background: #2d3748;
	color: #f1f5f9;
	padding: 12px;
	font-weight: 600;
	border: none;
	margin: 0;
	min-height: 40px;
}

.templates-modal-select option:checked {
	background: linear-gradient(#0284c7, #0284c7);
	background-color: #0284c7 !important;
	color: white !important;
}

.templates-modal-close {
	background: rgba(255, 255, 255, 0.2);
	border: 2px solid rgba(255, 255, 255, 0.3);
	border-radius: 8px;
	padding: 8px 12px;
	cursor: pointer;
	transition: all 0.2s ease;
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: 44px;
	min-height: 44px;
}

.templates-modal-close:hover {
	background: rgba(255, 255, 255, 0.35);
	border-color: white;
	transform: scale(1.1);
}

.templates-modal-close:active {
	transform: scale(0.95);
}

.templates-close-icon {
	font-size: 24px;
	color: white;
	font-weight: 700;
	line-height: 1;
}

.templates-modal-grid {
	padding: 24px;
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
	gap: 16px;
	overflow-y: auto;
	flex: 1;
	min-height: 0;
}

.templates-modal-card {
	border: 2px solid #e2e8f0;
	border-radius: 12px;
	padding: 18px;
	background: linear-gradient(135deg, #f8fafc, #f1f5f9);
	transition: all 0.3s ease;
	display: flex;
	flex-direction: column;
	gap: 12px;
	cursor: pointer;
}

body.dark-mode .templates-modal-card {
	background: linear-gradient(135deg, #1e293b, #334155);
	border-color: #4a5568;
}

.templates-modal-card:hover {
	border-color: #0ea5e9;
	box-shadow: 0 12px 28px rgba(14, 165, 233, 0.25);
	transform: translateY(-4px);
}

body.dark-mode .templates-modal-card:hover {
	border-color: #06b6d4;
	box-shadow: 0 12px 28px rgba(6, 182, 212, 0.3);
}

.templates-card-name {
	font-weight: 700;
	font-size: 16px;
	color: #1e293b;
	letter-spacing: -0.3px;
}

body.dark-mode .templates-card-name {
	color: #f1f5f9;
}

.templates-card-description {
	font-size: 13px;
	color: #64748b;
	line-height: 1.5;
	margin: 0;
}

body.dark-mode .templates-card-description {
	color: #cbd5e0;
}

.templates-card-meta {
	font-size: 12px;
	color: #94a3b8;
	display: flex;
	align-items: center;
	gap: 6px;
	margin-top: 4px;
}

body.dark-mode .templates-card-meta {
	color: #a0aec0;
}

.templates-card-button {
	background: linear-gradient(135deg, #0ea5e9, #06b6d4);
	color: white;
	border: none;
	border-radius: 10px;
	padding: 10px 14px;
	font-size: 13px;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.2s ease;
	margin-top: 8px;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 6px;
	box-shadow: 0 8px 16px rgba(14, 165, 233, 0.25);
}

.templates-card-button:hover {
	background: linear-gradient(135deg, #0284c7, #0891b2);
	transform: translateY(-2px);
	box-shadow: 0 12px 20px rgba(14, 165, 233, 0.35);
}

.templates-card-button:active {
	transform: translateY(0);
}

.templates-modal-empty {
	grid-column: 1 / -1;
	text-align: center;
	padding: 60px 20px;
	color: #64748b;
}

body.dark-mode .templates-modal-empty {
	color: #cbd5e0;
}

.templates-empty-title {
	font-size: 18px;
	font-weight: 700;
	margin-bottom: 8px;
	color: #1e293b;
}

body.dark-mode .templates-empty-title {
	color: #f1f5f9;
}

.templates-empty-subtitle {
	font-size: 14px;
	color: #94a3b8;
}

body.dark-mode .templates-empty-subtitle {
	color: #cbd5e0;
}

/* Responsive tweaks */
@media (max-width: 1100px) { .sidebar { width: 240px; } .sidebar.collapsed { margin-left: -240px; } .compact-fields-row { grid-template-columns: repeat(3, 1fr); } .templates-modal-grid { grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); } }
@media (max-width: 900px) { .sidebar { display: none; } #appLayout { flex-direction: column; } #contentArea { padding: 20px; } .templates-modal-header { flex-direction: column; align-items: flex-start; } .templates-modal-controls { width: 100%; } .templates-modal-close { align-self: flex-end; margin-top: -40px; } }
@media (max-width: 700px) { .create-testcase { padding: 12px; gap: 12px; } .btn-primary, .btn-submit { width: 100%; } .form-row { grid-template-columns: 1fr; } .compact-fields-row { grid-template-columns: repeat(2, 1fr); } .templates-modal-grid { grid-template-columns: 1fr; gap: 12px; padding: 16px; } .templates-modal-header { padding: 16px; } .templates-modal-title { font-size: 20px; } }
